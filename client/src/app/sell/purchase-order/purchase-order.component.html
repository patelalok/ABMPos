<mat-card>
    <mat-card-title>
        <h4>Purchase Order</h4>
    </mat-card-title>
    <mat-card-content>
        <div class="row d-flex align-items-center">
            <div class="col-md-3">
                <select class="form-control form-control" [(ngModel)]="this.salesHistoryDropdown" (change)="this.getTransactionDetails(this.salesHistoryDropdown)">
                            <option>Today</option>
                            <option>Yesterday</option>
                            <option>This Week</option>
                            <option>Last Week</option>
                            <option>This Month</option>
                            <option>Last Month</option>
                            <option>Last 3 Months</option>
                            <option>Last 6 Months</option>
                            <option>This Year</option>
                            <option>Last Year</option>
                            <option>Custom</option>
        
                        </select>
            </div>

            <div *ngIf="this.salesHistoryDropdown == 'Custom' " class="col-md-3 form-group d-flex align-items-center" [formGroup]="this.customDate">

                <mat-form-field class="float-never col-md-6">
                    <input formControlName="fromDate" matInput [matDatepicker]="fromDate" placeholder="Start Date" [max]="this.currentDate">
                    <mat-datepicker-toggle matSuffix [for]="fromDate"></mat-datepicker-toggle>
                    <mat-datepicker #fromDate></mat-datepicker>
                </mat-form-field>
                <label class="text-center">To</label>
                <mat-form-field class="float-never col-md-6">
                    <input class="" formControlName="toDate" matInput [matDatepicker]="toDate" placeholder="End Date" [min]="this.customDate.get('fromDate').value" [max]="this.currentDate">
                    <mat-datepicker-toggle matSuffix [for]="toDate"></mat-datepicker-toggle>
                    <mat-datepicker #toDate></mat-datepicker>
                </mat-form-field>
            </div>

            <div class="col-md-3">
                <select class="form-control form-control-lg" [(ngModel)]="this.selectedVendor" (change)="onVendorChoose()">
                            <option>Please Select Vendor</option>
                         <option *ngFor="let vendor of this.vendorDto">
                             {{vendor.name}}
                         </option>
                        </select>

            </div>

            <div class="col-md-3 d-flex justify-content-end">
                <button type="button" mat-raised-button class="bg-primary text-white action-button-lg" style="margin-right: 15px" [routerLink]="['/product/add']">
                      <i class="fa fa-plus-square" aria-hidden="true" label="Add"></i>
                      Purchase Order
                  </button>

                <!-- <button type="button" mat-raised-button class="bg-primary text-white action-button-lg" [routerLink]="['/product/addInventory']">
                      <i class="fa fa-plus-square" aria-hidden="true" label="Add"></i>
                      Add Inventory
                  </button> -->

            </div>


        </div>
        <div class="row">
            <div class="col-md-12 p-md-3">

                <p-dataTable [value]="this.productInventotyList" scrollable="true" [responsive]="true" scrollHeight="300px" [editable]="true" (onEditComplete)="updateInventoryDetails($event)">
                    <p-header>Add Product Inventory Table</p-header>

                    <p-column field="productNo" header="ProductNo" [style]="{'width':'15%','text-align':'center', 'overflow':'visible'}"></p-column>
                    <p-column field="description" header="Description" [style]="{'width':'40%','text-align':'center', 'overflow':'visible'}"></p-column>
                    <p-column field="defaultQuantity" header="Quantity To Order" [editable]="true" [style]="{'width':'10%','text-align':'center', 'overflow':'visible'}"></p-column>
                    <p-column field="cost" header="Cost" [editable]="true" [style]="{'width':'5%','text-align':'center', 'overflow':'visible'}"></p-column>
                    <p-column field="retail" header="Retail" [editable]="true" [style]="{'width':'5%','text-align':'center', 'overflow':'visible'}"></p-column>
                    <p-column field="quantity" header="In-Stock" [style]="{'width':'7%','text-align':'center', 'overflow':'visible'}"></p-column>
                    <p-column field="totalProductPrice" header="Total" [style]="{'width':'5%','text-align':'center', 'overflow':'visible'}"></p-column>
                    <p-column header="Action" styleClass="col-button" [style]="{'width':'10%','text-align':'center', 'overflow':'visible'}">
                        <!-- <ng-template pTemplate="header">
                                                <button type="button" pButton icon="fa-refresh"></button>
                                            </ng-template> -->
                        <ng-template let-product="rowData" pTemplate="body">

                            <button mat-button class="btn-red action-button-table" mat-button (click)="this.setProductForDelete(product)" data-toggle="modal" data-target="#removeProductInventory">
                                            <i class="fa fa-trash" aria-hidden="true"></i>
                                        </button>
                        </ng-template>
                    </p-column>


                </p-dataTable>

            </div>
        </div>

    </mat-card-content>
</mat-card>
<!-- <p-growl [(value)]="msgs"></p-growl> -->


<!-- Start Of Product History model -->
<div class="modal fade" id="productHistoryModel" role="dialog">
    <div class="modal-dialog modal-lg">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h3 class="modal-title">Product History</h3>
            </div>
            <div class="modal-body">

                <div class="row">
                    <div class="col-md-4">
                        <select class="form-control form-control-lg" [(ngModel)]="this.productHistoryDropDown" (change)="this.getProductHistory()">
                          <option>Today</option>
                          <option>Yesterday</option>
                          <option>This Week</option>
                          <option>Last Week</option>
                          <option>This Month</option>
                          <option>Last Month</option>
                          <option>Last 3 Months</option>
                          <option>Last 6 Months</option>
                          <option>This Year</option>
                          <option>Last Year</option>
                          <option>Custom</option>

                      </select>

                    </div>

                </div>

                <div class="row">
                    <table class="table">
                        <thead>
                            <tr>

                                <th>Product No</th>
                                <th>Product Sold</th>
                                <th>Cost</th>
                                <th>Retail</th>
                                <th>Date</th>
                                <th>Time</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let product of this.productHistoryDto">
                                <td>{{product.productNo}}</td>
                                <td>{{product.quantity}}</td>
                                <td>{{product.cost}}</td>
                                <td>{{product.retail}}</td>
                                <td>{{product.date}}</td>
                                <td>{{product.time}}</td>
                            </tr>
                        </tbody>
                    </table>

                </div>
                <div class="row">
                    <h5>Total Number Of Product Sold: 324(TODO CENTER)</h5>
                </div>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>


    </div>

</div>

<!-- End of Prodcut Histoty Model -->

<!-- Start of Delete product up -->
<div class="modal fade" id="deleteProduct" role="dialog">
    <div class="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Delete Product</h4>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
                <p>Are You Sure You Want To Delete This Product</p>
            </div>
            <div class="modal-footer">

                <button type="button" class="btn btn-danger" data-dismiss="modal" (click)="this.deleteProduct()">Yes</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancle</button>
            </div>
        </div>
    </div>
</div>

<!-- End of Delete product up -->


<!-- Start Of Cost price and Quantity model -->
<div class="modal fade" id="productInventory" role="dialog" (keyup.enter)="this.hideProductModal()">
    <div class="modal-dialog modal-lg">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Product Inventory</h4>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">

                <div class="row p-3">
                    <p-dataTable [value]="this.productInventoryList" [editable]="true" scrollable="true" [responsive]="true" scrollHeight="300px" (onEditComplete)="this.updateProductInventory($event)">
                        <p-column field="cost" header="Cost" [editable]="true">
                            <ng-template let-product="rowData" pTemplate="body">
                                {{product.cost | currency:'USD':'true'}}
                            </ng-template>
                        </p-column>

                        <p-column field="quantity" header="Quantity" [editable]="true"></p-column>

                        <p-column field="date" header="Date"></p-column>

                        <p-column field="time" header="Time"></p-column>

                    </p-dataTable>
                    <!-- 
                  <table class="table table-striped">
                      <thead>
                          <tr>
                              <th>Product No</th>
                              <th>Cost</th>
                              <th>Quantity</th>
                              <th>Date</th>
                              <th>Time</th>
                          </tr>
                      </thead>
                      <tbody>
                          <tr *ngFor="let inventory of this.productInventoryList">
                              <td>{{inventory.productNo}}</td>
                              <td>
                                  <input type="text" [(ngModel)]="inventory.cost" />
                              </td>
                              <td>
                                  <input type="text" [(ngModel)]="inventory.quantity" />
                              </td>
                              <td>{{inventory.date}}</td>
                              <td>{{inventory.time}}</td>
                              <td>
                                  <button (click)="this.updateProductInventory(inventory)">update</button>
                              </td>
                          </tr>
                      </tbody>
                  </table> -->
                </div>
            </div>


            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>


    </div>

</div>
<!-- Start Of Cost price and Quantity model -->